<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="580px" preserveAspectRatio="none" style="width:1819px;height:580px;background:#FFFFFF;" version="1.1" viewBox="0 0 1819 580" width="1819px" zoomAndPan="magnify"><defs/><g><rect height="26.2969" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="71" x="867.178" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="61" x="872.178" y="22.9951">Étape 5</text><!--MD5=[ea753ca1abf7a94a4cfc8e8263bc1d79]
cluster Tests--><g id="cluster_Tests"><rect fill="#E55039" height="121" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="174" x="147.356" y="44.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="46" x="211.356" y="59.292">Tests</text></g><!--MD5=[fac864e77539af95038f0151207ed802]
cluster API--><g id="cluster_API"><rect fill="#FFFFFF" height="167" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.5;" width="196" x="136.356" y="189.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="26" x="221.356" y="204.292">API</text></g><!--MD5=[81d8fddc0472df4f6601fb2b1deb463c]
cluster Domaine--><g id="cluster_Domaine"><path d="M403.356,381.2969 L536.356,189.2969 L1334.356,189.2969 L1467.356,381.2969 L1334.356,573.2969 L536.356,573.2969 L403.356,381.2969 " fill="#FFFFFF" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="70" x="900.356" y="204.292">Domaine</text></g><!--MD5=[67f432cef3e5a62b9f5e3b502eaa3775]
cluster Port primaire--><g id="cluster_Port primaire"><rect fill="#FFFFFF" height="157" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.5;" width="438" x="427.356" y="236.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="108" x="592.356" y="251.292">Port primaire</text></g><!--MD5=[807a62717be71470e6dc66073b340ed5]
cluster Port secondaire--><g id="cluster_Port secondaire"><rect fill="#FFFFFF" height="150" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.5;" width="221" x="1222.356" y="250.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="128" x="1268.856" y="265.292">Port secondaire</text></g><!--MD5=[aedc30b8666742a3000193d7e0a0b93e]
cluster Adapters--><g id="cluster_Adapters"><rect fill="#FFFFFF" height="257" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.5;" width="313" x="1500.356" y="177.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="74" x="1619.856" y="192.292">Adapters</text></g><!--MD5=[c5d177b2fa847c48384a4f399638f91d]
cluster Persistance--><g id="cluster_Persistance"><rect fill="#FFFFFF" height="83" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.5;" width="265" x="1524.356" y="220.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="95" x="1609.356" y="235.292">Persistance</text></g><!--MD5=[7058f338f099d236033fc5161613b206]
cluster Api--><g id="cluster_Api"><rect fill="#FFFFFF" height="83" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.5;" width="204" x="1554.856" y="327.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="26" x="1643.856" y="342.292">Api</text></g><!--MD5=[7372c784d7525e52e863be2b44848b63]
entity stepDefs--><g id="elem_stepDefs"><rect fill="#F1F1F1" height="68.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142" x="163.356" y="79.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="173.356" y="102.792">Cucumber</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="173.356" y="119.0889">Application Step</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="173.356" y="135.3857">Definitions</text></g><!--MD5=[fc7365cf6f77a1581fd125086398369c]
class RestController--><g id="elem_RestController"><rect codeLine="28" fill="#F1F1F1" height="32" id="RestController" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="162.4" x="153.356" y="224.2969"/><ellipse cx="168.356" cy="240.2969" fill="#E3664A" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M169.2779,237.5469 C167.3716,237.6875 166.0591,238.875 166.0591,240.4531 C166.0591,241.8594 167.2623,243.0781 168.7154,243.0781 C168.8716,243.0781 169.0123,243.0625 169.2779,243.0156 L169.2779,243.0781 L170.0748,243.0781 C170.6998,243.0781 171.0123,242.8594 171.0123,242.375 C171.0123,242.0938 170.8873,241.9063 170.6216,241.7813 L170.6216,237 C170.6216,235.1094 169.3091,233.75 167.4654,233.75 C165.2623,233.75 163.6529,235.875 163.6529,238.8125 L163.6529,241.6719 C163.6529,242.9219 163.9341,244.1406 164.4498,245.0625 C165.1685,246.3125 166.0904,246.875 167.4966,246.875 C169.106,246.875 170.4966,246.2188 170.4966,245.4219 C170.4966,245.0313 170.1998,244.7188 169.8248,244.7188 C169.6216,244.7188 169.5279,244.7656 169.2935,245.0156 C168.9654,245.3438 168.2935,245.5625 167.5435,245.5625 C166.7935,245.5625 166.2623,245.2969 165.856,244.7031 C165.2779,243.9063 164.9966,242.8594 164.9966,241.5625 L164.9966,238.9063 C164.9966,236.7344 166.0591,235.0938 167.4966,235.0938 C168.5435,235.0938 169.2779,235.875 169.2779,237 L169.2779,237.5469 Z M169.2779,241.6563 C169.0435,241.7031 168.9498,241.7031 168.8404,241.7031 C168.0123,241.7031 167.4029,241.1719 167.4029,240.4688 C167.4029,239.6406 168.1529,239.0313 169.2779,238.9219 L169.2779,241.6563 Z " fill="#000000"/><image height="20" width="20" x="182.356" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAABPUlEQVR4XpWTvYqFMBCFff8uogiCIIh/YCVYCVaCINgK2tgK2vgGe9Yjc2Ou9y77FZKZzImZk8Q6NOq6Vkqladq2rZ7/hKUHYRiqO+M4btum1+jcxIZS8Dwvz3O9krzE0zSZoieKopjn2RSbVX+BvdzE+DkGyBp1tm0bGXKJYS+CKIowDoKAcwj3fZfV2Zfv+6Y4jmNJkaZpRCbAfJjHAqxyiRl3XYdxkiSYuIlOyrJkDYuvnsVn6RmWYoATxs459c5Bt6VJEQ/DcDz5L3tWIpZYxLwSklenDA1jwFvIymcxSiXvOA7yWZYxZOfruv6K9VPVzxnG8Hngy70AuIAp13WPE0uUhhhUVcUiwrugTp8vMZ/hv5DlrnNelqXve7PqA6ZYB7t9f9gCrwB5EAuwQL/JhL6Qb2IdusgjFH4AYX5z4fKZrM4AAAAASUVORK5CYII=" y="230.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="206.756" y="246.9951">RestController</text></g><!--MD5=[e6bae807ee1954862a3f201b633ae692]
class CourtageResource--><g id="elem_CourtageResource"><rect codeLine="29" fill="#F8C291" height="32" id="CourtageResource" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="164" x="152.356" y="308.2969"/><ellipse cx="167.356" cy="324.2969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M169.6998,319.9688 C168.7623,319.5313 168.1685,319.3906 167.2935,319.3906 C164.6685,319.3906 162.6685,321.4688 162.6685,324.1875 L162.6685,325.3125 C162.6685,327.8906 164.7779,329.7813 167.6685,329.7813 C168.8873,329.7813 170.0435,329.4844 170.7935,328.9375 C171.3716,328.5313 171.6998,328.0781 171.6998,327.6875 C171.6998,327.2344 171.3091,326.8438 170.8404,326.8438 C170.6216,326.8438 170.4185,326.9219 170.231,327.1094 C169.7779,327.5938 169.7779,327.5938 169.5904,327.6875 C169.1685,327.9531 168.481,328.0781 167.7154,328.0781 C165.6685,328.0781 164.3716,326.9844 164.3716,325.2813 L164.3716,324.1875 C164.3716,322.4063 165.6216,321.0938 167.356,321.0938 C167.9341,321.0938 168.5435,321.25 169.0123,321.5 C169.4966,321.7813 169.6685,322 169.7623,322.4063 C169.8248,322.8125 169.856,322.9375 169.9966,323.0625 C170.1373,323.2031 170.3716,323.3125 170.5904,323.3125 C170.856,323.3125 171.1216,323.1719 171.2935,322.9531 C171.4029,322.7969 171.4341,322.6094 171.4341,322.1875 L171.4341,320.7656 C171.4341,320.3281 171.4185,320.2031 171.3248,320.0469 C171.1685,319.7813 170.8873,319.6406 170.5904,319.6406 C170.2935,319.6406 170.0904,319.7344 169.8716,320.0469 L169.6998,319.9688 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="181.356" y="329.1436">CourtageResource</text></g><!--MD5=[aea9443ce97642cf67741219a9cddff6]
class PortefeuilleDejaExistantException--><g id="elem_PortefeuilleDejaExistantException"><rect codeLine="32" fill="#F1F1F1" height="32" id="PortefeuilleDejaExistantException" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="280" x="506.356" y="504.2969"/><ellipse cx="521.356" cy="520.2969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M523.6998,515.9688 C522.7623,515.5313 522.1685,515.3906 521.2935,515.3906 C518.6685,515.3906 516.6685,517.4688 516.6685,520.1875 L516.6685,521.3125 C516.6685,523.8906 518.7779,525.7813 521.6685,525.7813 C522.8873,525.7813 524.0435,525.4844 524.7935,524.9375 C525.3716,524.5313 525.6998,524.0781 525.6998,523.6875 C525.6998,523.2344 525.3091,522.8438 524.8404,522.8438 C524.6216,522.8438 524.4185,522.9219 524.231,523.1094 C523.7779,523.5938 523.7779,523.5938 523.5904,523.6875 C523.1685,523.9531 522.481,524.0781 521.7154,524.0781 C519.6685,524.0781 518.3716,522.9844 518.3716,521.2813 L518.3716,520.1875 C518.3716,518.4063 519.6216,517.0938 521.356,517.0938 C521.9341,517.0938 522.5435,517.25 523.0123,517.5 C523.4966,517.7813 523.6685,518 523.7623,518.4063 C523.8248,518.8125 523.856,518.9375 523.9966,519.0625 C524.1373,519.2031 524.3716,519.3125 524.5904,519.3125 C524.856,519.3125 525.1216,519.1719 525.2935,518.9531 C525.4029,518.7969 525.4341,518.6094 525.4341,518.1875 L525.4341,516.7656 C525.4341,516.3281 525.4185,516.2031 525.3248,516.0469 C525.1685,515.7813 524.8873,515.6406 524.5904,515.6406 C524.2935,515.6406 524.0904,515.7344 523.8716,516.0469 L523.6998,515.9688 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="248" x="535.356" y="525.1436">PortefeuilleDejaExistantException</text></g><!--MD5=[e0e92636e5e3ba6a58023ec526db7d5e]
class PortefeuilleNonGereException--><g id="elem_PortefeuilleNonGereException"><rect codeLine="33" fill="#F1F1F1" height="32" id="PortefeuilleNonGereException" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="252" x="520.356" y="437.2969"/><ellipse cx="535.356" cy="453.2969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M537.6998,448.9688 C536.7623,448.5313 536.1685,448.3906 535.2935,448.3906 C532.6685,448.3906 530.6685,450.4688 530.6685,453.1875 L530.6685,454.3125 C530.6685,456.8906 532.7779,458.7813 535.6685,458.7813 C536.8873,458.7813 538.0435,458.4844 538.7935,457.9375 C539.3716,457.5313 539.6998,457.0781 539.6998,456.6875 C539.6998,456.2344 539.3091,455.8438 538.8404,455.8438 C538.6216,455.8438 538.4185,455.9219 538.231,456.1094 C537.7779,456.5938 537.7779,456.5938 537.5904,456.6875 C537.1685,456.9531 536.481,457.0781 535.7154,457.0781 C533.6685,457.0781 532.3716,455.9844 532.3716,454.2813 L532.3716,453.1875 C532.3716,451.4063 533.6216,450.0938 535.356,450.0938 C535.9341,450.0938 536.5435,450.25 537.0123,450.5 C537.4966,450.7813 537.6685,451 537.7623,451.4063 C537.8248,451.8125 537.856,451.9375 537.9966,452.0625 C538.1373,452.2031 538.3716,452.3125 538.5904,452.3125 C538.856,452.3125 539.1216,452.1719 539.2935,451.9531 C539.4029,451.7969 539.4341,451.6094 539.4341,451.1875 L539.4341,449.7656 C539.4341,449.3281 539.4185,449.2031 539.3248,449.0469 C539.1685,448.7813 538.8873,448.6406 538.5904,448.6406 C538.2935,448.6406 538.0904,448.7344 537.8716,449.0469 L537.6998,448.9688 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="220" x="549.356" y="458.1436">PortefeuilleNonGereException</text></g><!--MD5=[bc22c92f0cb65b1ef4f937088745b5b1]
class ManagedBean--><g id="elem_ManagedBean"><rect codeLine="34" fill="#B8E994" height="32" id="ManagedBean" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="132" x="958.856" y="224.2969"/><ellipse cx="973.856" cy="240.2969" fill="#E3664A" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M974.7779,237.5469 C972.8716,237.6875 971.5591,238.875 971.5591,240.4531 C971.5591,241.8594 972.7623,243.0781 974.2154,243.0781 C974.3716,243.0781 974.5123,243.0625 974.7779,243.0156 L974.7779,243.0781 L975.5748,243.0781 C976.1998,243.0781 976.5123,242.8594 976.5123,242.375 C976.5123,242.0938 976.3873,241.9063 976.1216,241.7813 L976.1216,237 C976.1216,235.1094 974.8091,233.75 972.9654,233.75 C970.7623,233.75 969.1529,235.875 969.1529,238.8125 L969.1529,241.6719 C969.1529,242.9219 969.4341,244.1406 969.9498,245.0625 C970.6685,246.3125 971.5904,246.875 972.9966,246.875 C974.606,246.875 975.9966,246.2188 975.9966,245.4219 C975.9966,245.0313 975.6998,244.7188 975.3248,244.7188 C975.1216,244.7188 975.0279,244.7656 974.7935,245.0156 C974.4654,245.3438 973.7935,245.5625 973.0435,245.5625 C972.2935,245.5625 971.7623,245.2969 971.356,244.7031 C970.7779,243.9063 970.4966,242.8594 970.4966,241.5625 L970.4966,238.9063 C970.4966,236.7344 971.5591,235.0938 972.9966,235.0938 C974.0435,235.0938 974.7779,235.875 974.7779,237 L974.7779,237.5469 Z M974.7779,241.6563 C974.5435,241.7031 974.4498,241.7031 974.3404,241.7031 C973.5123,241.7031 972.9029,241.1719 972.9029,240.4688 C972.9029,239.6406 973.6529,239.0313 974.7779,238.9219 L974.7779,241.6563 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="987.856" y="245.1436">ManagedBean</text></g><!--MD5=[8f24a0ae3e3eeca727ae9e78fab7990f]
class Courtage--><g id="elem_Courtage"><rect codeLine="35" fill="#F8C291" height="32" id="Courtage" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="975.856" y="308.2969"/><ellipse cx="990.856" cy="324.2969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M993.1998,319.9688 C992.2623,319.5313 991.6685,319.3906 990.7935,319.3906 C988.1685,319.3906 986.1685,321.4688 986.1685,324.1875 L986.1685,325.3125 C986.1685,327.8906 988.2779,329.7813 991.1685,329.7813 C992.3873,329.7813 993.5435,329.4844 994.2935,328.9375 C994.8716,328.5313 995.1998,328.0781 995.1998,327.6875 C995.1998,327.2344 994.8091,326.8438 994.3404,326.8438 C994.1216,326.8438 993.9185,326.9219 993.731,327.1094 C993.2779,327.5938 993.2779,327.5938 993.0904,327.6875 C992.6685,327.9531 991.981,328.0781 991.2154,328.0781 C989.1685,328.0781 987.8716,326.9844 987.8716,325.2813 L987.8716,324.1875 C987.8716,322.4063 989.1216,321.0938 990.856,321.0938 C991.4341,321.0938 992.0435,321.25 992.5123,321.5 C992.9966,321.7813 993.1685,322 993.2623,322.4063 C993.3248,322.8125 993.356,322.9375 993.4966,323.0625 C993.6373,323.2031 993.8716,323.3125 994.0904,323.3125 C994.356,323.3125 994.6216,323.1719 994.7935,322.9531 C994.9029,322.7969 994.9341,322.6094 994.9341,322.1875 L994.9341,320.7656 C994.9341,320.3281 994.9185,320.2031 994.8248,320.0469 C994.6685,319.7813 994.3873,319.6406 994.0904,319.6406 C993.7935,319.6406 993.5904,319.7344 993.3716,320.0469 L993.1998,319.9688 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="1004.856" y="329.1436">Courtage</text></g><!--MD5=[4d94ef589ea4e6d49ac79f16ccd71851]
class Portefeuille--><g id="elem_Portefeuille"><rect codeLine="36" fill="#F1F1F1" height="72.5938" id="Portefeuille" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="225" x="912.356" y="483.7969"/><ellipse cx="978.606" cy="499.7969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M980.9498,495.4688 C980.0123,495.0313 979.4185,494.8906 978.5435,494.8906 C975.9185,494.8906 973.9185,496.9688 973.9185,499.6875 L973.9185,500.8125 C973.9185,503.3906 976.0279,505.2813 978.9185,505.2813 C980.1373,505.2813 981.2935,504.9844 982.0435,504.4375 C982.6216,504.0313 982.9498,503.5781 982.9498,503.1875 C982.9498,502.7344 982.5591,502.3438 982.0904,502.3438 C981.8716,502.3438 981.6685,502.4219 981.481,502.6094 C981.0279,503.0938 981.0279,503.0938 980.8404,503.1875 C980.4185,503.4531 979.731,503.5781 978.9654,503.5781 C976.9185,503.5781 975.6216,502.4844 975.6216,500.7813 L975.6216,499.6875 C975.6216,497.9063 976.8716,496.5938 978.606,496.5938 C979.1841,496.5938 979.7935,496.75 980.2623,497 C980.7466,497.2813 980.9185,497.5 981.0123,497.9063 C981.0748,498.3125 981.106,498.4375 981.2466,498.5625 C981.3873,498.7031 981.6216,498.8125 981.8404,498.8125 C982.106,498.8125 982.3716,498.6719 982.5435,498.4531 C982.6529,498.2969 982.6841,498.1094 982.6841,497.6875 L982.6841,496.2656 C982.6841,495.8281 982.6685,495.7031 982.5748,495.5469 C982.4185,495.2813 982.1373,495.1406 981.8404,495.1406 C981.5435,495.1406 981.3404,495.2344 981.1216,495.5469 L980.9498,495.4688 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="999.106" y="504.6436">Portefeuille</text><line style="stroke:#181818;stroke-width:0.5;" x1="913.356" x2="1136.356" y1="515.7969" y2="515.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="918.356" y="532.792">String nom</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="213" x="918.356" y="549.0889">Map&lt;String, Integer&gt; actions</text></g><!--MD5=[44a6e07bf3cdcb710ae98a593f44f4e4]
class Achat--><g id="elem_Achat"><rect codeLine="40" fill="#F1F1F1" height="72.5938" id="Achat" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105" x="972.356" y="375.7969"/><ellipse cx="1001.306" cy="391.7969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1003.6498,387.4688 C1002.7123,387.0313 1002.1185,386.8906 1001.2435,386.8906 C998.6185,386.8906 996.6185,388.9688 996.6185,391.6875 L996.6185,392.8125 C996.6185,395.3906 998.7279,397.2813 1001.6185,397.2813 C1002.8373,397.2813 1003.9935,396.9844 1004.7435,396.4375 C1005.3216,396.0313 1005.6498,395.5781 1005.6498,395.1875 C1005.6498,394.7344 1005.2591,394.3438 1004.7904,394.3438 C1004.5716,394.3438 1004.3685,394.4219 1004.181,394.6094 C1003.7279,395.0938 1003.7279,395.0938 1003.5404,395.1875 C1003.1185,395.4531 1002.431,395.5781 1001.6654,395.5781 C999.6185,395.5781 998.3216,394.4844 998.3216,392.7813 L998.3216,391.6875 C998.3216,389.9063 999.5716,388.5938 1001.306,388.5938 C1001.8841,388.5938 1002.4935,388.75 1002.9623,389 C1003.4466,389.2813 1003.6185,389.5 1003.7123,389.9063 C1003.7748,390.3125 1003.806,390.4375 1003.9466,390.5625 C1004.0873,390.7031 1004.3216,390.8125 1004.5404,390.8125 C1004.806,390.8125 1005.0716,390.6719 1005.2435,390.4531 C1005.3529,390.2969 1005.3841,390.1094 1005.3841,389.6875 L1005.3841,388.2656 C1005.3841,387.8281 1005.3685,387.7031 1005.2748,387.5469 C1005.1185,387.2813 1004.8373,387.1406 1004.5404,387.1406 C1004.2435,387.1406 1004.0404,387.2344 1003.8216,387.5469 L1003.6498,387.4688 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="1018.406" y="396.6436">Achat</text><line style="stroke:#181818;stroke-width:0.5;" x1="973.356" x2="1076.356" y1="407.7969" y2="407.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="978.356" y="424.792">String action</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="978.356" y="441.0889">int nombre</text></g><!--MD5=[187da8343eacb1c1d37e24ed685d15af]
class ServiceCourtage--><g id="elem_ServiceCourtage"><rect codeLine="45" fill="#F1F1F1" height="105.1875" id="ServiceCourtage" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="406" x="443.356" y="271.7969"/><ellipse cx="582.606" cy="287.7969" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M583.5591,284.5781 L585.2779,284.5781 C585.6685,284.5781 585.856,284.5469 585.981,284.4688 C586.2466,284.3125 586.3873,284.0313 586.3873,283.7344 C586.3873,283.4688 586.2779,283.2031 586.0435,283.0313 C585.8716,282.9219 585.731,282.8906 585.2779,282.8906 L580.1373,282.8906 C579.6998,282.8906 579.5748,282.9063 579.4185,283 C579.1685,283.1563 579.0123,283.4531 579.0123,283.7344 C579.0123,284.0156 579.1529,284.2656 579.3716,284.4375 C579.5279,284.5469 579.7154,284.5781 580.1373,284.5781 L581.856,284.5781 L581.856,291.0938 L580.1373,291.0938 C579.6998,291.0938 579.5748,291.1094 579.4185,291.2188 C579.1685,291.375 579.0123,291.6563 579.0123,291.9531 C579.0123,292.2031 579.1529,292.4688 579.3716,292.625 C579.5279,292.75 579.731,292.7969 580.1373,292.7969 L585.2779,292.7969 C586.0279,292.7969 586.3873,292.5156 586.3873,291.9531 C586.3873,291.6719 586.2779,291.4219 586.0435,291.25 C585.8716,291.125 585.731,291.0938 585.2779,291.0938 L583.5591,291.0938 L583.5591,284.5781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="119" x="603.106" y="292.6436">ServiceCourtage</text><line style="stroke:#181818;stroke-width:0.5;" x1="444.356" x2="848.356" y1="303.7969" y2="303.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="384" x="449.356" y="320.792">Portefeuille creerPortefeuille(String nomPortefeuille)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="269" x="449.356" y="337.0889">boolean gere(String nomPortefeuille)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="394" x="449.356" y="353.3857">void ajouteAction(String nomPortefeuille, Achat achat)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="357" x="449.356" y="369.6826">BigDecimal calculerValeurEnsemblePortefeuilles()</text></g><!--MD5=[698309b2215fa8d18e9c50d85999959a]
class PortefeuilleRepository--><g id="elem_PortefeuilleRepository"><rect codeLine="53" fill="#F1F1F1" height="32" id="PortefeuilleRepository" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="189" x="1238.356" y="285.2969"/><ellipse cx="1253.356" cy="301.2969" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1254.3091,298.0781 L1256.0279,298.0781 C1256.4185,298.0781 1256.606,298.0469 1256.731,297.9688 C1256.9966,297.8125 1257.1373,297.5313 1257.1373,297.2344 C1257.1373,296.9688 1257.0279,296.7031 1256.7935,296.5313 C1256.6216,296.4219 1256.481,296.3906 1256.0279,296.3906 L1250.8873,296.3906 C1250.4498,296.3906 1250.3248,296.4063 1250.1685,296.5 C1249.9185,296.6563 1249.7623,296.9531 1249.7623,297.2344 C1249.7623,297.5156 1249.9029,297.7656 1250.1216,297.9375 C1250.2779,298.0469 1250.4654,298.0781 1250.8873,298.0781 L1252.606,298.0781 L1252.606,304.5938 L1250.8873,304.5938 C1250.4498,304.5938 1250.3248,304.6094 1250.1685,304.7188 C1249.9185,304.875 1249.7623,305.1563 1249.7623,305.4531 C1249.7623,305.7031 1249.9029,305.9688 1250.1216,306.125 C1250.2779,306.25 1250.481,306.2969 1250.8873,306.2969 L1256.0279,306.2969 C1256.7779,306.2969 1257.1373,306.0156 1257.1373,305.4531 C1257.1373,305.1719 1257.0279,304.9219 1256.7935,304.75 C1256.6216,304.625 1256.481,304.5938 1256.0279,304.5938 L1254.3091,304.5938 L1254.3091,298.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="157" x="1267.356" y="306.1436">PortefeuilleRepository</text></g><!--MD5=[eee557b54314ae5ef55878b38fb2d47a]
class ServiceBourse--><g id="elem_ServiceBourse"><rect codeLine="54" fill="#F1F1F1" height="32" id="ServiceBourse" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="135" x="1265.356" y="352.2969"/><ellipse cx="1280.356" cy="368.2969" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1281.3091,365.0781 L1283.0279,365.0781 C1283.4185,365.0781 1283.606,365.0469 1283.731,364.9688 C1283.9966,364.8125 1284.1373,364.5313 1284.1373,364.2344 C1284.1373,363.9688 1284.0279,363.7031 1283.7935,363.5313 C1283.6216,363.4219 1283.481,363.3906 1283.0279,363.3906 L1277.8873,363.3906 C1277.4498,363.3906 1277.3248,363.4063 1277.1685,363.5 C1276.9185,363.6563 1276.7623,363.9531 1276.7623,364.2344 C1276.7623,364.5156 1276.9029,364.7656 1277.1216,364.9375 C1277.2779,365.0469 1277.4654,365.0781 1277.8873,365.0781 L1279.606,365.0781 L1279.606,371.5938 L1277.8873,371.5938 C1277.4498,371.5938 1277.3248,371.6094 1277.1685,371.7188 C1276.9185,371.875 1276.7623,372.1563 1276.7623,372.4531 C1276.7623,372.7031 1276.9029,372.9688 1277.1216,373.125 C1277.2779,373.25 1277.481,373.2969 1277.8873,373.2969 L1283.0279,373.2969 C1283.7779,373.2969 1284.1373,373.0156 1284.1373,372.4531 C1284.1373,372.1719 1284.0279,371.9219 1283.7935,371.75 C1283.6216,371.625 1283.481,371.5938 1283.0279,371.5938 L1281.3091,371.5938 L1281.3091,365.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="103" x="1294.356" y="373.1436">ServiceBourse</text></g><!--MD5=[ca6cee28dcedad29d01c31626d25d3fe]
class PortefeuilleRepositoryMock--><g id="elem_PortefeuilleRepositoryMock"><rect codeLine="59" fill="#B8E994" height="32" id="PortefeuilleRepositoryMock" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="233" x="1540.356" y="255.2969"/><ellipse cx="1555.356" cy="271.2969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1557.6998,266.9688 C1556.7623,266.5313 1556.1685,266.3906 1555.2935,266.3906 C1552.6685,266.3906 1550.6685,268.4688 1550.6685,271.1875 L1550.6685,272.3125 C1550.6685,274.8906 1552.7779,276.7813 1555.6685,276.7813 C1556.8873,276.7813 1558.0435,276.4844 1558.7935,275.9375 C1559.3716,275.5313 1559.6998,275.0781 1559.6998,274.6875 C1559.6998,274.2344 1559.3091,273.8438 1558.8404,273.8438 C1558.6216,273.8438 1558.4185,273.9219 1558.231,274.1094 C1557.7779,274.5938 1557.7779,274.5938 1557.5904,274.6875 C1557.1685,274.9531 1556.481,275.0781 1555.7154,275.0781 C1553.6685,275.0781 1552.3716,273.9844 1552.3716,272.2813 L1552.3716,271.1875 C1552.3716,269.4063 1553.6216,268.0938 1555.356,268.0938 C1555.9341,268.0938 1556.5435,268.25 1557.0123,268.5 C1557.4966,268.7813 1557.6685,269 1557.7623,269.4063 C1557.8248,269.8125 1557.856,269.9375 1557.9966,270.0625 C1558.1373,270.2031 1558.3716,270.3125 1558.5904,270.3125 C1558.856,270.3125 1559.1216,270.1719 1559.2935,269.9531 C1559.4029,269.7969 1559.4341,269.6094 1559.4341,269.1875 L1559.4341,267.7656 C1559.4341,267.3281 1559.4185,267.2031 1559.3248,267.0469 C1559.1685,266.7813 1558.8873,266.6406 1558.5904,266.6406 C1558.2935,266.6406 1558.0904,266.7344 1557.8716,267.0469 L1557.6998,266.9688 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="201" x="1569.356" y="276.1436">PortefeuilleRepositoryMock</text></g><!--MD5=[3a0046c2b15d4156a5d73f55f1f6c326]
class ServiceBourseMock--><g id="elem_ServiceBourseMock"><rect codeLine="62" fill="#B8E994" height="32" id="ServiceBourseMock" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="172" x="1570.856" y="362.2969"/><ellipse cx="1585.856" cy="378.2969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1588.1998,373.9688 C1587.2623,373.5313 1586.6685,373.3906 1585.7935,373.3906 C1583.1685,373.3906 1581.1685,375.4688 1581.1685,378.1875 L1581.1685,379.3125 C1581.1685,381.8906 1583.2779,383.7813 1586.1685,383.7813 C1587.3873,383.7813 1588.5435,383.4844 1589.2935,382.9375 C1589.8716,382.5313 1590.1998,382.0781 1590.1998,381.6875 C1590.1998,381.2344 1589.8091,380.8438 1589.3404,380.8438 C1589.1216,380.8438 1588.9185,380.9219 1588.731,381.1094 C1588.2779,381.5938 1588.2779,381.5938 1588.0904,381.6875 C1587.6685,381.9531 1586.981,382.0781 1586.2154,382.0781 C1584.1685,382.0781 1582.8716,380.9844 1582.8716,379.2813 L1582.8716,378.1875 C1582.8716,376.4063 1584.1216,375.0938 1585.856,375.0938 C1586.4341,375.0938 1587.0435,375.25 1587.5123,375.5 C1587.9966,375.7813 1588.1685,376 1588.2623,376.4063 C1588.3248,376.8125 1588.356,376.9375 1588.4966,377.0625 C1588.6373,377.2031 1588.8716,377.3125 1589.0904,377.3125 C1589.356,377.3125 1589.6216,377.1719 1589.7935,376.9531 C1589.9029,376.7969 1589.9341,376.6094 1589.9341,376.1875 L1589.9341,374.7656 C1589.9341,374.3281 1589.9185,374.2031 1589.8248,374.0469 C1589.6685,373.7813 1589.3873,373.6406 1589.0904,373.6406 C1588.7935,373.6406 1588.5904,373.7344 1588.3716,374.0469 L1588.1998,373.9688 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="1599.856" y="383.1436">ServiceBourseMock</text></g><!--MD5=[54112e04d3a6779b9dc65db6a91ae1fb]
link CourtageResource to RestController--><g id="link_CourtageResource_RestController"><path codeLine="66" d="M234.356,308.1009 C234.356,294.8529 234.356,276.0139 234.356,261.5539 " fill="none" id="CourtageResource-to-RestController" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="234.356,256.4429,230.356,265.4429,234.356,261.4429,238.356,265.4429,234.356,256.4429" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="184.356" y="286.8638">est annotée</text></g><!--MD5=[20cdeda92637d793f96d577db91732c7]
link CourtageResource to ServiceCourtage--><g id="link_CourtageResource_ServiceCourtage"><path codeLine="67" d="M316.359,324.2969 C351.639,324.2969 394.767,324.2969 438.033,324.2969 " fill="none" id="CourtageResource-to-ServiceCourtage" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="443.035,324.2969,434.035,320.2969,438.035,324.2969,434.035,328.2969,443.035,324.2969" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37" x="349.356" y="320.3638">utilise</text></g><!--MD5=[026d1740de6b1c0d224da24d56cdf520]
reverse link ServiceCourtage to Courtage--><g id="link_ServiceCourtage_Courtage"><path codeLine="68" d="M869.498,324.2969 C909.538,324.2969 947.463,324.2969 975.696,324.2969 " fill="none" id="ServiceCourtage-backto-Courtage" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="869.383,331.2969,849.383,324.2969,869.383,317.2969,869.383,331.2969" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[8368da74d81fb0e6bf24693e3992fee7]
link Courtage to ManagedBean--><g id="link_Courtage_ManagedBean"><path codeLine="69" d="M1024.856,308.1009 C1024.856,294.8529 1024.856,276.0139 1024.856,261.5539 " fill="none" id="Courtage-to-ManagedBean" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="1024.856,256.4429,1020.856,265.4429,1024.856,261.4429,1028.856,265.4429,1024.856,256.4429" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="974.856" y="286.8638">est annotée</text></g><!--MD5=[3c496331fb430fc8ed0fed28d53632ce]
link Courtage to PortefeuilleRepository--><g id="link_Courtage_PortefeuilleRepository"><path codeLine="70" d="M1074.006,320.6779 C1116.476,317.4849 1179.726,312.7319 1232.946,308.7309 " fill="none" id="Courtage-to-PortefeuilleRepository" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="1238.066,308.3469,1228.7843,305.053,1233.0809,308.7325,1229.4013,313.0292,1238.066,308.3469" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37" x="1168.356" y="307.3638">utilise</text></g><!--MD5=[297b39777e310712c350aac214e02202]
link Courtage to ServiceBourse--><g id="link_Courtage_ServiceBourse"><path codeLine="71" d="M1074.006,331.2199 C1123.996,338.4089 1202.766,349.7359 1260.106,357.9789 " fill="none" id="Courtage-to-ServiceBourse" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="1265.236,358.7169,1256.8995,353.4725,1260.2873,358.0028,1255.757,361.3905,1265.236,358.7169" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37" x="1168.356" y="340.3638">utilise</text></g><!--MD5=[f247a1c6099a3d638dc68195c92659aa]
reverse link PortefeuilleRepository to PortefeuilleRepositoryMock--><g id="link_PortefeuilleRepository_PortefeuilleRepositoryMock"><path codeLine="72" d="M1447.766,290.6839 C1477.786,287.8869 1510.206,284.8669 1540.316,282.0619 " fill="none" id="PortefeuilleRepository-backto-PortefeuilleRepositoryMock" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="1447.986,297.6939,1427.426,292.5789,1446.686,283.7539,1447.986,297.6939" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[b945d686dcd7edb1f4198bcd37ea8240]
reverse link ServiceBourse to ServiceBourseMock--><g id="link_ServiceBourse_ServiceBourseMock"><path codeLine="73" d="M1420.816,370.9979 C1467.396,372.4439 1524.536,374.2189 1570.816,375.6559 " fill="none" id="ServiceBourse-backto-ServiceBourseMock" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="1420.346,377.9869,1400.576,370.3689,1420.786,363.9929,1420.346,377.9869" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[49684f83b220cbaa979855d5e70ca9c7]
reverse link CourtageResource to stepDefs--><g id="link_CourtageResource_stepDefs"><path codeLine="74" d="M147.299,307.7529 C107.897,295.4529 64.948,274.2239 41.356,237.7969 C6,183.2059 94.531,147.9709 163.124,129.6349 " fill="none" id="CourtageResource-backto-stepDefs" style="stroke:#181818;stroke-width:2.0;"/><polygon fill="#181818" points="152.085,309.2089,144.6379,302.7637,147.3013,307.7543,142.3106,310.4177,152.085,309.2089" style="stroke:#181818;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="15.356" y="233.8638">via RestAssured</text></g><!--MD5=[257cb5968ca2fff19d67256264a2c0ea]
@startuml
!include <logos/spring>
skinparam packageStyle rectangle
skinparam package.backgroundColor white
hide empty members
hide stereotype
left to right direction
skinparam useBetaStyle true

<style>
.tests {
	BackgroundColor #e55039
	FontColor #FFFFFF
}
.ajout {
	BackgroundColor #b8e994
}
.modif {
	BackgroundColor #f8c291
}
</style>

title Étape 5
rectangle Tests <<tests>> {
    rectangle "Cucumber\nApplication Step\nDefinitions" as stepDefs {
    }
}
package API {
	annotation "<$spring,scale=0.4> RestController" as RestController
	class CourtageResource <<modif>>
}
package Domaine <<Hexagon>> {
	class PortefeuilleDejaExistantException
	class PortefeuilleNonGereException
	annotation ManagedBean <<ajout>>
	class Courtage <<modif>>
	class Portefeuille {
		String nom
		Map<String, Integer> actions
	}
	class Achat {
		String action
		int nombre
	}
	package "Port primaire" {
		interface ServiceCourtage {
			Portefeuille creerPortefeuille(String nomPortefeuille)
			boolean gere(String nomPortefeuille)
			void ajouteAction(String nomPortefeuille, Achat achat)
			BigDecimal calculerValeurEnsemblePortefeuilles()
		}
	}
	package "Port secondaire" {
		interface PortefeuilleRepository
		interface ServiceBourse
    }
}
package Adapters {
	package Persistance {
		class PortefeuilleRepositoryMock <<ajout>>
	}
	package Api {
		class ServiceBourseMock <<ajout>>
	}
}

RestController <.l. CourtageResource : est annotée
CourtageResource ..> ServiceCourtage : utilise
ServiceCourtage <|.. Courtage
ManagedBean <.l. Courtage : est annotée
Courtage ..>  PortefeuilleRepository : utilise
Courtage ..>  ServiceBourse : utilise
PortefeuilleRepository <|.. PortefeuilleRepositoryMock
ServiceBourse <|.. ServiceBourseMock
stepDefs -[bold]l-> CourtageResource : via RestAssured
@enduml

@startuml
sprite $spring [51x50/16] {
000000000000366200000000000000000000000000000000000
000000000006666666500000000000000000000000000000000
000000000006666666666600000000000000000000000000000
000000000016666666666666610000000000000000000000000
000000000066666666666666666620000000000000000000000
000000000066666666666666666666640000000000000000000
000000000066666666666666666666666660000000000000000
000000000666666666666666666666666666661000000000000
000000000666666666666666666666666666666663000000000
000000000666666666666666666666666666666666665000000
000000006666666666666666666666666666666666666666000
000000006666666666666666666666666666666666666666660
000000006666000666666666666666666666666666666666666
000000066660000066666666666666666666666666666666666
000000066660000066666666666666566666666666666666666
000000066660000066666666650000000006666666666666664
000000566666000466666666000000000000066636666666660
000000666666666666666630000000000000006206666666660
000000666666666666666300000000000000000466666666650
000004666666666666666000000000000000003664666666600
000006666666000366660000000000000000066660666666600
000006666660000066630000000000000003666662666666600
000036666660000066600000000000004666666666666666000
000066666660000066600000006666666666666666666666000
000066666660000066500000666666666666666666566666000
000266666660000066300006666666666666664666566660000
000666666660000066300006666666666666606666466660000
000666666660000066400066666666666666056666566660000
001666666660000066600066666666666660166666666600000
006666666660000066600066666666666600666661666600000
006666666660000066600066666666660016666660666600000
006666666660000066660006666665000666666616666100000
066666666660000066660001641000046666666206666000000
066666666660000066666003000036666666660066666000000
066666666660000066666666000000000000000666662000000
666666666660000066666661000000000000006666660000000
666666666660000066666666100000000000566666660000000
666666666666000666666666664000000066666666630000000
066666666666666666666666666666666666666666600000000
002666666666666666666666666666666666666666600000000
000000666666666666666666666666666666666666400000000
000000000566666666666666666666666666666666000000000
000000000000466666666666666666666666666666000000000
000000000000000266666666666666666666666665000000000
000000000000000000166666666666666666666660000000000
000000000000000000000056666666666666666660000000000
000000000000000000000000036666666666666660000000000
000000000000000000000000000026666666666600000000000
000000000000000000000000000000006666666600000000000
000000000000000000000000000000000006666000000000000
}
skinparam packageStyle rectangle
skinparam package.backgroundColor white
hide empty members
hide stereotype
left to right direction
skinparam useBetaStyle true

<style>
.tests {
	BackgroundColor #e55039
	FontColor #FFFFFF
}
.ajout {
	BackgroundColor #b8e994
}
.modif {
	BackgroundColor #f8c291
}
</style>

title Étape 5
rectangle Tests <<tests>> {
    rectangle "Cucumber\nApplication Step\nDefinitions" as stepDefs {
    }
}
package API {
	annotation "<$spring,scale=0.4> RestController" as RestController
	class CourtageResource <<modif>>
}
package Domaine <<Hexagon>> {
	class PortefeuilleDejaExistantException
	class PortefeuilleNonGereException
	annotation ManagedBean <<ajout>>
	class Courtage <<modif>>
	class Portefeuille {
		String nom
		Map<String, Integer> actions
	}
	class Achat {
		String action
		int nombre
	}
	package "Port primaire" {
		interface ServiceCourtage {
			Portefeuille creerPortefeuille(String nomPortefeuille)
			boolean gere(String nomPortefeuille)
			void ajouteAction(String nomPortefeuille, Achat achat)
			BigDecimal calculerValeurEnsemblePortefeuilles()
		}
	}
	package "Port secondaire" {
		interface PortefeuilleRepository
		interface ServiceBourse
    }
}
package Adapters {
	package Persistance {
		class PortefeuilleRepositoryMock <<ajout>>
	}
	package Api {
		class ServiceBourseMock <<ajout>>
	}
}

RestController <.l. CourtageResource : est annotée
CourtageResource ..> ServiceCourtage : utilise
ServiceCourtage <|.. Courtage
ManagedBean <.l. Courtage : est annotée
Courtage ..>  PortefeuilleRepository : utilise
Courtage ..>  ServiceBourse : utilise
PortefeuilleRepository <|.. PortefeuilleRepositoryMock
ServiceBourse <|.. ServiceBourseMock
stepDefs -[bold]l-> CourtageResource : via RestAssured
@enduml

PlantUML version 1.2022.4beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>